#!/data/data/com.termux/files/usr/bin/bash
set -euo pipefail
S="$HOME/.shortcuts" B="$HOME/.bashrc" D="$HOME/termux-backup" M="Simple backup of ~/.shortcuts (incl .hidden) + .bashrc"
mkdir -p "$D"
H="$S/.hidden"
[ -d "\( H" ] && [ -z " \)(ls -A "$H")" ] && { touch "$H/.gitkeep"; echo "# Ensures git tracks this folder" > "$H/.gitkeep"; }
cp -rf "$S" "$D/" || { echo "Copy failed"; exit 1; }
[ -f "$B" ] && cp -f "$B" "$D/" || echo "No .bashrc – skipped"
cd "$D" || exit 1
git add -A .
git status --porcelain | grep -q . && { git commit -m "$M"; echo "→ Committed"; } || echo "No changes"
git push origin main 2>/dev/null || echo "Push failed (network/auth?)"
echo "Done → $D" && ls -la "$D"
